{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}

{% block body %}

    <div class="container mx-auto px-4 py-8">
        <a href="{{ path("home") }}">Retour</a>
        <section class="py-12">
            <article class="bg-gray-100 p-8 rounded-xl">
                <h2 class="text-lg font-bold">{{ article.title }}</h2>
                <p class="text-gray-500 text-sm">Ecrit le {{ article.createdAt | date('d/m/y') }} à {{ article.createdAt | date('H:i') }} par {{ article.createdBy }}. - #{{ article.category.title }}</p>
                <img class="my-4" src="{{ article.image}}" alt="{{ article.title }}">
                <p>{{ article.content | raw }}</p>
            </article>
            <a class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 mt-4 ml-auto inline-block" href="{{ path("edit_article", {'id': article.id})}}">Modifier l'article</a>
        </section>
        <section class="py-12">
            <h2 class="text-lg font-bold">{{ article.comments | length }} commentaires</h2>
            {% for comment in article.comments %}
            <div class="py-8">
                <p class="text-gray-500 text-sm">Par {{ comment.author }}, le {{ comment.createdAt | date('d/m/y') }} à {{ comment.createdAt | date('H:i') }}</p>
                <p>{{ comment.content | raw }}</p>
            </div>
            {% endfor %}

            {% if app.user %}
            {{ form_start(form_comment) }}
            {{ form_row(form_comment.author, {'attr': {'placeholder': 'Votre nom'}}) }}
            {{ form_row(form_comment.content, {'attr': {'placeholder': 'Votre commentaire'}}) }}
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 mt-4">Commenter</button>
            {{ form_end(form_comment) }}
            {% else %}
                <h2 class="text-lg font-bold"><a class="text-indigo-600" href="{{ path('security_login') }}">Connectez-vous </a>si vous souhaitez poster un commentaire !</h2>
            {% endif %}
        </section>
    </div>

{% endblock %}
